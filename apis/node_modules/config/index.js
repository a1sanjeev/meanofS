/**
 * Created by SanJeev on 23-06-2017.
 */

var nodeMailer=require('nodemailer');
var swig=require('swig');

configs = {};
configs.mongodburl = "mongodb://localhost:27017/admin";

const options = {
    host: 'smtp.gmail.com',
    port: 465,
    secure: true,
    auth: {
        user: '@gmail.com',
        pass: ''
    }
};
const transporter = nodeMailer.createTransport(options);

configs.send_mail = function (html_name, data_obj, subject_text,to_mail,cc_email,bcc_recipients,callback) {
    var mail_html = swig.renderFile('../EmailTemplates/' + html_name + '.html', data_obj);
    transporter.sendMail({
        from: "info@infield.tech",
        to: to_mail,
        cc: cc_email,
        bcc: bcc_recipients,
        subject: subject_text,
        html: mail_html
    }, function (error, response) {
        if (error) {
            console.log(error);
        }
        else {
            callback();
        }
    });
};


module.exports = configs;